{{ form_start(form) }}

    <div class="form-group">
        {{ form_label(form.username, null, {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.username, {'attr': {'class': 'u-full-width'}}) }}
    </div>

    <div class="form-group">
        {{ form_label(form.first_name, null, {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.first_name, {'attr': {'class': 'u-full-width'}}) }}
    </div>
    <div class="form-group">
        {{ form_label(form.last_name, null, {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.last_name, {'attr': {'class': 'form-input'}}) }}
    </div>
    <div class="form-group">
        {{ form_label(form.email, null, {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.email, {'attr': {'class': 'form-input'}}) }}
    </div>
    <div class="form-group">
        {{ form_label(form.status, null, {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.status, {'attr': {'class': 'u-full-width'}}) }}
    </div>

    <div class="form-group">
        {{ form_label(form.role, null, {'label_attr': {'class': 'form-label'}}) }}

        {% for role_var in form.role %}
            <label class="form-checkbox form-inline">
                {{ form_widget(role_var, {'attr': {'class': 'form'}}) }}
                <i class="form-icon"></i>
                {{ form_label(role_var) }}
            </label>
        {% endfor %}
    </div>

    <div class="form-group">
        {{ form_label(form.plain_password, null, {'label_attr': {'class': 'form-label'}}) }}
        {{ form_widget(form.plain_password, {'attr': {'class': 'u-full-width'}}) }}
    </div>

{{ form_end(form) }}
<script>
    
    (function (d, w) {
        
        if (window.location.href.match(/new$/)) {
            d.querySelector('[name="user[plain_password]"]').setAttribute('required', '');
        }
        // w.addEventListener('load', function (e) {
        //     flatpickr(d.querySelector('.flatpickr-input'), {
        //         "locale": "ru",
        //         "dateFormat": "d.m.Y"
        //     });
        //
        // });
        
    })(document, window);
</script>